{% extends "students/step_base.html" %}

{% block step_icon %}fa-solid fa-user{% endblock %}
{% block step_title %}Basic Information{% endblock %}
{% block step_description %}Let's start with your personal details{% endblock %}

{% block form_content %}
<div class="form-group">
        <label for="full_name" class="required">Full Name</label>
        {{ form.full_name }}
        {% if form.full_name.errors %}
            <span class="error-message">{{ form.full_name.errors.0 }}</span>
        {% endif %}
    </div>

    <div class="form-group">
        <label class="required">Gender</label>
        <div class="radio-group">
            <div class="radio-option">
                <input type="radio" id="male" name="gender" value="male" {% if form.gender.value == 'male' %}checked{% endif %} required>
                <label for="male">
                    <i class="fa-solid fa-mars"></i> Male
                </label>
            </div>
            <div class="radio-option">
                <input type="radio" id="female" name="gender" value="female" {% if form.gender.value == 'female' %}checked{% endif %}>
                <label for="female">
                    <i class="fa-solid fa-venus"></i> Female
                </label>
            </div>
            <div class="radio-option">
                <input type="radio" id="other" name="gender" value="other" {% if form.gender.value == 'other' %}checked{% endif %}>
                <label for="other">
                    <i class="fa-solid fa-genderless"></i> Other
                </label>
            </div>
        </div>
        {% if form.gender.errors %}
            <span class="error-message">{{ form.gender.errors.0 }}</span>
        {% endif %}
    </div>

    <div class="form-group">
        <label for="date_of_birth" class="required">Date of Birth</label>
        {{ form.date_of_birth }}
        <p class="text-muted" style="margin-top: var(--space-2); margin-bottom: 0; font-size: 0.8125rem;">
            You must be at least 16 years old
        </p>
        {% if form.date_of_birth.errors %}
            <span class="error-message">{{ form.date_of_birth.errors.0 }}</span>
        {% endif %}
    </div>

    <div class="form-group">
        <label for="current_city" class="required">Current City</label>
        {{ form.current_city }}
        {% if form.current_city.errors %}
            <span class="error-message">{{ form.current_city.errors.0 }}</span>
        {% endif %}
    </div>

    <div class="form-group">
        <label for="current_state" class="required">Current State</label>
        <select id="current_state" name="current_state" required>
            <option value="">Select your state</option>
            <option value="Andhra Pradesh" {% if form.current_state.value == 'Andhra Pradesh' %}selected{% endif %}>Andhra Pradesh</option>
            <option value="Arunachal Pradesh" {% if form.current_state.value == 'Arunachal Pradesh' %}selected{% endif %}>Arunachal Pradesh</option>
            <option value="Assam" {% if form.current_state.value == 'Assam' %}selected{% endif %}>Assam</option>
            <option value="Bihar" {% if form.current_state.value == 'Bihar' %}selected{% endif %}>Bihar</option>
            <option value="Chhattisgarh" {% if form.current_state.value == 'Chhattisgarh' %}selected{% endif %}>Chhattisgarh</option>
            <option value="Delhi" {% if form.current_state.value == 'Delhi' %}selected{% endif %}>Delhi</option>
            <option value="Goa" {% if form.current_state.value == 'Goa' %}selected{% endif %}>Goa</option>
            <option value="Gujarat" {% if form.current_state.value == 'Gujarat' %}selected{% endif %}>Gujarat</option>
            <option value="Haryana" {% if form.current_state.value == 'Haryana' %}selected{% endif %}>Haryana</option>
            <option value="Himachal Pradesh" {% if form.current_state.value == 'Himachal Pradesh' %}selected{% endif %}>Himachal Pradesh</option>
            <option value="Jharkhand" {% if form.current_state.value == 'Jharkhand' %}selected{% endif %}>Jharkhand</option>
            <option value="Karnataka" {% if form.current_state.value == 'Karnataka' %}selected{% endif %}>Karnataka</option>
            <option value="Kerala" {% if form.current_state.value == 'Kerala' %}selected{% endif %}>Kerala</option>
            <option value="Madhya Pradesh" {% if form.current_state.value == 'Madhya Pradesh' %}selected{% endif %}>Madhya Pradesh</option>
            <option value="Maharashtra" {% if form.current_state.value == 'Maharashtra' %}selected{% endif %}>Maharashtra</option>
            <option value="Manipur" {% if form.current_state.value == 'Manipur' %}selected{% endif %}>Manipur</option>
            <option value="Meghalaya" {% if form.current_state.value == 'Meghalaya' %}selected{% endif %}>Meghalaya</option>
            <option value="Mizoram" {% if form.current_state.value == 'Mizoram' %}selected{% endif %}>Mizoram</option>
            <option value="Nagaland" {% if form.current_state.value == 'Nagaland' %}selected{% endif %}>Nagaland</option>
            <option value="Odisha" {% if form.current_state.value == 'Odisha' %}selected{% endif %}>Odisha</option>
            <option value="Punjab" {% if form.current_state.value == 'Punjab' %}selected{% endif %}>Punjab</option>
            <option value="Rajasthan" {% if form.current_state.value == 'Rajasthan' %}selected{% endif %}>Rajasthan</option>
            <option value="Sikkim" {% if form.current_state.value == 'Sikkim' %}selected{% endif %}>Sikkim</option>
            <option value="Tamil Nadu" {% if form.current_state.value == 'Tamil Nadu' %}selected{% endif %}>Tamil Nadu</option>
            <option value="Telangana" {% if form.current_state.value == 'Telangana' %}selected{% endif %}>Telangana</option>
            <option value="Tripura" {% if form.current_state.value == 'Tripura' %}selected{% endif %}>Tripura</option>
            <option value="Uttar Pradesh" {% if form.current_state.value == 'Uttar Pradesh' %}selected{% endif %}>Uttar Pradesh</option>
            <option value="Uttarakhand" {% if form.current_state.value == 'Uttarakhand' %}selected{% endif %}>Uttarakhand</option>
            <option value="West Bengal" {% if form.current_state.value == 'West Bengal' %}selected{% endif %}>West Bengal</option>
        </select>
        {% if form.current_state.errors %}
            <span class="error-message">{{ form.current_state.errors.0 }}</span>
        {% endif %}
    </div>

    <div class="form-group">
        <label class="required">Preferred Languages</label>
        <p class="text-muted" style="margin-bottom: var(--space-3); font-size: 0.8125rem;">Select all that apply</p>
        <div class="checkbox-group">
            <div class="checkbox-option">
                <input type="checkbox" id="lang_english" name="lang_english" {% if form.lang_english.value %}checked{% endif %}>
                <label for="lang_english">
                    <i class="fa-solid fa-language"></i> English
                </label>
            </div>
            <div class="checkbox-option">
                <input type="checkbox" id="lang_hindi" name="lang_hindi" {% if form.lang_hindi.value %}checked{% endif %}>
                <label for="lang_hindi">
                    <i class="fa-solid fa-language"></i> Hindi
                </label>
            </div>
            <div class="checkbox-option">
                <input type="checkbox" id="lang_tamil" name="lang_tamil" {% if form.lang_tamil.value %}checked{% endif %}>
                <label for="lang_tamil">
                    <i class="fa-solid fa-language"></i> Tamil
                </label>
            </div>
            <div class="checkbox-option">
                <input type="checkbox" id="lang_telugu" name="lang_telugu" {% if form.lang_telugu.value %}checked{% endif %}>
                <label for="lang_telugu">
                    <i class="fa-solid fa-language"></i> Telugu
                </label>
            </div>
            <div class="checkbox-option">
                <input type="checkbox" id="lang_kannada" name="lang_kannada" {% if form.lang_kannada.value %}checked{% endif %}>
                <label for="lang_kannada">
                    <i class="fa-solid fa-language"></i> Kannada
                </label>
            </div>
            <div class="checkbox-option">
                <input type="checkbox" id="lang_bengali" name="lang_bengali" {% if form.lang_bengali.value %}checked{% endif %}>
                <label for="lang_bengali">
                    <i class="fa-solid fa-language"></i> Bengali
                </label>
            </div>
        </div>
        {% if form.errors %}
            {% with show_error=False %}
                {% for field, errors in form.errors.items %}
                    {% if 'lang_' in field or field == '__all__' %}
                        {% with show_error=True %}{% endwith %}
                    {% endif %}
                {% endfor %}

                {% if show_error %}
                    <span class="error-message">Please select at least one preferred language</span>
                {% endif %}
            {% endwith %}
        {% endif %}
    </div>
{% endblock %}

{% block step_script %}
<script>
$(document).ready(function() {
    // Name validation on blur
    $('#full_name').on('blur', function() {
        const name = $(this).val().trim();
        if (name && name.length < 3) {
            $(this).css('border-color', 'var(--error)');
        } else {
            $(this).css('border-color', '');
        }
    });
});
</script>
{% endblock %}